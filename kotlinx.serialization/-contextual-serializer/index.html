<HTML>
<HEAD>
<meta charset="UTF-8">
<title>kotlinx.serialization.ContextualSerializer - kotlinx-serialization</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">kotlinx-serialization</a>&nbsp;/&nbsp;<a href="../index.html">kotlinx.serialization</a>&nbsp;/&nbsp;<a href="./index.html">ContextualSerializer</a><br/>
<br/>
<h1>ContextualSerializer</h1>
<a name="kotlinx.serialization.ContextualSerializer"></a>
(common, jvm, native) <code><span class="keyword">class </span><span class="identifier">ContextualSerializer</span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-k-serializer/index.html"><span class="identifier">KSerializer</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code>
<p>This class provides support for retrieving a serializer in runtime, instead of using the one precompiled by the serialization plugin.
This serializer is enabled by <a href="../-contextual/index.html#kotlinx.serialization.Contextual">Contextual</a> or <a href="../-use-contextual-serialization/index.html#kotlinx.serialization.UseContextualSerialization">UseContextualSerialization</a>.</p>
<p>Typical usage of ContextualSerializer would be a serialization of a class which does not have
static serializer (e.g. Java class or class from 3rd party library);
or desire to override serialized class form in one dedicated output format.</p>
<p>Serializers are being looked for in a <a href="../../kotlinx.serialization.modules/-serializers-module/index.html#kotlinx.serialization.modules.SerializersModule">SerializersModule</a> from the target <a href="../../kotlinx.serialization.encoding/-encoder/index.html#kotlinx.serialization.encoding.Encoder">Encoder</a> or <a href="../../kotlinx.serialization.encoding/-decoder/index.html#kotlinx.serialization.encoding.Decoder">Decoder</a>, using statically known <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html">KClass</a>.
To create a serial module, use <a href="../../kotlinx.serialization.modules/-serializers-module/index.html#kotlinx.serialization.modules.SerializersModule">SerializersModule</a> factory function.
To pass it to encoder and decoder, refer to particular <a href="../-serial-format/index.html#kotlinx.serialization.SerialFormat">SerialFormat</a>'s documentation.</p>
<p>Usage of contextual serializer can be demonstrated by the following example:</p>
<pre><code>import java.util.Date

@Serializable
class ClassWithDate(val data: String, @Contextual val timestamp: Date)

val moduleForDate = serializersModule(MyISO8601DateSerializer)
val json = Json { serializersModule = moduleForDate }
json.encodeToString(ClassWithDate("foo", Date())
</code></pre>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
(common, jvm, native) 
<h4><a href="-init-.html">&lt;init&gt;</a></h4>
</td>
<td>
<code><span class="identifier">&lt;init&gt;</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$<init>(kotlin.reflect.KClass((kotlinx.serialization.ContextualSerializer.T)))/serializableClass">serializableClass</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html"><span class="identifier">KClass</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span></code>
<p>This class provides support for retrieving a serializer in runtime, instead of using the one precompiled by the serialization plugin.
This serializer is enabled by <a href="../-contextual/index.html#kotlinx.serialization.Contextual">Contextual</a> or <a href="../-use-contextual-serialization/index.html#kotlinx.serialization.UseContextualSerialization">UseContextualSerialization</a>.</p>
<code><span class="identifier">&lt;init&gt;</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$<init>(kotlin.reflect.KClass((kotlinx.serialization.ContextualSerializer.T)), kotlinx.serialization.KSerializer((kotlinx.serialization.ContextualSerializer.T)), kotlin.Array((kotlinx.serialization.KSerializer((kotlin.Any)))))/serializableClass">serializableClass</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html"><span class="identifier">KClass</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$<init>(kotlin.reflect.KClass((kotlinx.serialization.ContextualSerializer.T)), kotlinx.serialization.KSerializer((kotlinx.serialization.ContextualSerializer.T)), kotlin.Array((kotlinx.serialization.KSerializer((kotlin.Any)))))/fallbackSerializer">fallbackSerializer</span><span class="symbol">:</span>&nbsp;<a href="../-k-serializer/index.html"><span class="identifier">KSerializer</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">?</span><span class="symbol">, </span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$<init>(kotlin.reflect.KClass((kotlinx.serialization.ContextualSerializer.T)), kotlinx.serialization.KSerializer((kotlinx.serialization.ContextualSerializer.T)), kotlin.Array((kotlinx.serialization.KSerializer((kotlin.Any)))))/typeParametersSerializers">typeParametersSerializers</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/index.html"><span class="identifier">Array</span></a><span class="symbol">&lt;</span><a href="../-k-serializer/index.html"><span class="identifier">KSerializer</span></a><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">)</span></code></td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
(common, jvm, native) 
<h4><a href="descriptor.html">descriptor</a></h4>
</td>
<td>
<p>Describes the structure of the serializable representation of <a href="../-k-serializer/index.html#T">T</a>, produced
by this serializer. Knowing the structure of the descriptor is required to determine
the shape of the serialized form (e.g. what elements are encoded as lists and what as primitives)
along with its metadata such as alternative names.</p>
<code><span class="keyword">val </span><span class="identifier">descriptor</span><span class="symbol">: </span><a href="../../kotlinx.serialization.descriptors/-serial-descriptor/index.html"><span class="identifier">SerialDescriptor</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
(common, jvm, native) 
<h4><a href="deserialize.html">deserialize</a></h4>
</td>
<td>
<p>Deserializes the value of type <a href="../-deserialization-strategy/index.html#T">T</a> using the format that is represented by the given <a href="../-deserialization-strategy/deserialize.html#kotlinx.serialization.DeserializationStrategy$deserialize(kotlinx.serialization.encoding.Decoder)/decoder">decoder</a>.
<a href="../-deserialization-strategy/deserialize.html#kotlinx.serialization.DeserializationStrategy$deserialize(kotlinx.serialization.encoding.Decoder)">deserialize</a> method is format-agnostic and operates with a high-level structured <a href="../../kotlinx.serialization.encoding/-decoder/index.html#kotlinx.serialization.encoding.Decoder">Decoder</a> API.
As long as most of the formats imply an arbitrary order of properties, deserializer should be able
to decode these properties in an arbitrary order and in a format-agnostic way.
For that purposes, <a href="../../kotlinx.serialization.encoding/-composite-decoder/decode-element-index.html#kotlinx.serialization.encoding.CompositeDecoder$decodeElementIndex(kotlinx.serialization.descriptors.SerialDescriptor)">CompositeDecoder.decodeElementIndex</a>-based loop is used: decoder firstly
signals property at which index it is ready to decode and then expects caller to decode
property with the given index.</p>
<code><span class="keyword">fun </span><span class="identifier">deserialize</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$deserialize(kotlinx.serialization.encoding.Decoder)/decoder">decoder</span><span class="symbol">:</span>&nbsp;<a href="../../kotlinx.serialization.encoding/-decoder/index.html"><span class="identifier">Decoder</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">T</span></code></td>
</tr>
<tr>
<td>
(common, jvm, native) 
<h4><a href="serialize.html">serialize</a></h4>
</td>
<td>
<p>Serializes the <a href="../-serialization-strategy/serialize.html#kotlinx.serialization.SerializationStrategy$serialize(kotlinx.serialization.encoding.Encoder, kotlinx.serialization.SerializationStrategy.T)/value">value</a> of type <a href="../-serialization-strategy/index.html#T">T</a> using the format that is represented by the given <a href="../-serialization-strategy/serialize.html#kotlinx.serialization.SerializationStrategy$serialize(kotlinx.serialization.encoding.Encoder, kotlinx.serialization.SerializationStrategy.T)/encoder">encoder</a>.
<a href="../-serialization-strategy/serialize.html#kotlinx.serialization.SerializationStrategy$serialize(kotlinx.serialization.encoding.Encoder, kotlinx.serialization.SerializationStrategy.T)">serialize</a> method is format-agnostic and operates with a high-level structured <a href="../../kotlinx.serialization.encoding/-encoder/index.html#kotlinx.serialization.encoding.Encoder">Encoder</a> API.
Throws <a href="../-serialization-exception/index.html#kotlinx.serialization.SerializationException">SerializationException</a> if value cannot be serialized.</p>
<code><span class="keyword">fun </span><span class="identifier">serialize</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$serialize(kotlinx.serialization.encoding.Encoder, kotlinx.serialization.ContextualSerializer.T)/encoder">encoder</span><span class="symbol">:</span>&nbsp;<a href="../../kotlinx.serialization.encoding/-encoder/index.html"><span class="identifier">Encoder</span></a><span class="symbol">, </span><span class="identifier" id="kotlinx.serialization.ContextualSerializer$serialize(kotlinx.serialization.encoding.Encoder, kotlinx.serialization.ContextualSerializer.T)/value">value</span><span class="symbol">:</span>&nbsp;<span class="identifier">T</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
