<HTML>
<HEAD>
<meta charset="UTF-8">
<title>kotlinx.serialization.json.JsonTransformingSerializer.<init> - kotlinx-serialization</title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">kotlinx-serialization</a>&nbsp;/&nbsp;<a href="../index.html">kotlinx.serialization.json</a>&nbsp;/&nbsp;<a href="index.html">JsonTransformingSerializer</a>&nbsp;/&nbsp;<a href="./-init-.html">&lt;init&gt;</a><br/>
<br/>
<h1>&lt;init&gt;</h1>
<a name="kotlinx.serialization.json.JsonTransformingSerializer$&lt;init&gt;(kotlinx.serialization.KSerializer((kotlinx.serialization.json.JsonTransformingSerializer.T)))"></a>
(common, jvm, native) <code><span class="identifier">&lt;init&gt;</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.json.JsonTransformingSerializer$<init>(kotlinx.serialization.KSerializer((kotlinx.serialization.json.JsonTransformingSerializer.T)))/tSerializer">tSerializer</span><span class="symbol">:</span>&nbsp;<a href="../../kotlinx.serialization/-k-serializer/index.html"><span class="identifier">KSerializer</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span></code>
<p>Base class for custom serializers that allows manipulating an abstract JSON
representation of the class before serialization or deserialization.</p>
<p><a href="index.html#kotlinx.serialization.json.JsonTransformingSerializer">JsonTransformingSerializer</a> provides capabilities to manipulate <a href="../-json-element.html#kotlinx.serialization.json.JsonElement">JsonElement</a> representation
directly instead of interacting with <a href="../../kotlinx.serialization.encoding/-encoder/index.html#kotlinx.serialization.encoding.Encoder">Encoder</a> and <a href="../../kotlinx.serialization.encoding/-decoder/index.html#kotlinx.serialization.encoding.Decoder">Decoder</a> in order to apply a custom
transformation to the JSON.
Please note that this class expects that <a href="../../kotlinx.serialization.encoding/-encoder/index.html#kotlinx.serialization.encoding.Encoder">Encoder</a> and <a href="../../kotlinx.serialization.encoding/-decoder/index.html#kotlinx.serialization.encoding.Decoder">Decoder</a> are implemented by <a href="../-json-decoder/index.html#kotlinx.serialization.json.JsonDecoder">JsonDecoder</a> and <a href="../-json-encoder/index.html#kotlinx.serialization.json.JsonEncoder">JsonEncoder</a>,
i.e. serializers derived from this class work only with <a href="../-json/index.html#kotlinx.serialization.json.Json">Json</a> format.</p>
<p>There are two methods in which JSON transformation can be defined: <a href="transform-serialize.html#kotlinx.serialization.json.JsonTransformingSerializer$transformSerialize(kotlinx.serialization.json.JsonElement)">transformSerialize</a> and <a href="transform-deserialize.html#kotlinx.serialization.json.JsonTransformingSerializer$transformDeserialize(kotlinx.serialization.json.JsonElement)">transformDeserialize</a>.
You can override one or both of them. Consult their documentation for details.</p>
<p>Usage example:</p>
<pre><code>@Serializable
data class Example(
    @Serializable(UnwrappingJsonListSerializer::class) val data: String
)
// Unwraps a list to a single object
object UnwrappingJsonListSerializer :
    JsonTransformingSerializer&lt;String&gt;(String.serializer()) {
    override fun transformDeserialize(element: JsonElement): JsonElement {
        if (element !is JsonArray) return element
        require(element.size == 1) { "Array size must be equal to 1 to unwrap it" }
        return element.first()
    }
}
// Now these functions both yield correct result:
Json.parse(Example.serializer(), """{"data":["str1"]}""")
Json.parse(Example.serializer(), """{"data":"str1"}""")
</code></pre>
<h3>Parameters</h3>
<p><a name="T"></a>
<code>T</code> - A type for Kotlin property for which this serializer could be applied.
    <strong>Not</strong> the type that you may encounter in JSON. (e.g. if you unwrap a list
    to a single value <code>T</code>, use <code>T</code>, not <code>List&lt;T&gt;</code>)</p>
<p><a name="tSerializer"></a>
<code>tSerializer</code> - A serializer for type <a href="index.html#T">T</a>. Determines <a href="../-json-element.html#kotlinx.serialization.json.JsonElement">JsonElement</a> which is passed to <a href="transform-serialize.html#kotlinx.serialization.json.JsonTransformingSerializer$transformSerialize(kotlinx.serialization.json.JsonElement)">transformSerialize</a>.
    Should be able to parse <a href="../-json-element.html#kotlinx.serialization.json.JsonElement">JsonElement</a> from <a href="transform-deserialize.html#kotlinx.serialization.json.JsonTransformingSerializer$transformDeserialize(kotlinx.serialization.json.JsonElement)">transformDeserialize</a> function.
    Usually, default <a href="../../kotlinx.serialization/serializer.html#kotlinx.serialization$serializer()">serializer</a> is sufficient.</p>
</BODY>
</HTML>
